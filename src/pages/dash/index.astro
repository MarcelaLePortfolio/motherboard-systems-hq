<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Motherboard Dash</title>
    <script type="module">
      const state = {
        task: '',
        isLoading: false,
        output: '',
      };

      async function handleSubmit(e) {
        e.preventDefault();
        state.isLoading = true;
        state.output = '';
        document.querySelector('.loader')?.remove();
        document.querySelector('pre')?.remove();

        const res = await fetch('/api/task', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ task: state.task }),
        });

        const data = await res.text();
        state.isLoading = false;
        state.output = data;

        const outputNode = document.createElement('pre');
        outputNode.textContent = state.output;
        document.body.appendChild(outputNode);
      }
    </script>
    <style>
      body {
        font-family: system-ui, sans-serif;
        padding: 2rem;
      }

      textarea,
      button {
        width: 100%;
        padding: 0.75rem;
        margin-top: 0.75rem;
      }

      pre {
        background: #f5f5f5;
        padding: 1rem;
        white-space: pre-wrap;
        word-break: break-word;
        margin-top: 1rem;
      }

      .loader {
        text-align: center;
        padding-top: 1rem;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <h1><0001f9e0> Motherboard Dash</h1>
    <form onsubmit="return handleSubmit(event)">
      <label for="task">What do you want to do?</label>
      <textarea id="task" rows="4" placeholder="e.g. Restart Cade server…" required
        oninput="state.task = this.value"></textarea>
      <button type="submit">Send</button>
    </form>

    <div class="loader" style="display:none">Thinking…</div>
  </body>
</html>
