services:
  worker:
    build:
      context: .
      dockerfile: Dockerfile.worker
    image: motherboard_systems_hq-worker:node20
    working_dir: /app
    environment:
      POSTGRES_URL: postgres://postgres:postgres@motherboard_systems_hq-postgres-1:5432/postgres
      PHASE27_CLAIM_ONE_SQL: server/worker/phase28_claim_one.sql
      PHASE27_MARK_SUCCESS_SQL: server/worker/phase28_mark_success.sql
      PHASE27_MARK_FAILURE_SQL: server/worker/phase28_mark_failure.sql
      PHASE26_TICK_MS: "500"
      PHASE26_WORKER_ACTOR: phase26.worker
    command: ["node","server/worker/phase26_task_worker.mjs"]
    networks:
      - motherboard_systems_hq_default
networks:
  motherboard_systems_hq_default:
    external: true
