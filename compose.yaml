services:
  dashboard:
    image: motherboard_systems_hq-dashboard:latest
    build: 
      context: .
      dockerfile: Dockerfile.dashboard
    ports:
      - "3000:3000"
    restart: always
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/"]
      interval: 45s  # Relaxed interval
      timeout: 10s
      retries: 5     # More retries

  reflections-stream:
    image: motherboard_systems_hq-reflections-stream:latest
    build: 
      context: .
      dockerfile: Dockerfile.reflections-stream
    ports:
      - "3101:3101"
    restart: always
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3101/"]
      interval: 45s  # Relaxed interval
      timeout: 10s
      retries: 5     # More retries
      
  ops-stream:
    image: motherboard_systems_hq-ops-stream:latest
    build: 
      context: .
      dockerfile: Dockerfile.ops-stream
    ports:
      - "3201:3201"
    restart: always
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3201/"]
      interval: 45s  # Relaxed interval
      timeout: 10s
      retries: 5     # More retries
