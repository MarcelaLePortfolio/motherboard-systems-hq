services:
  worker:
    image: node:20-bookworm-slim
    working_dir: /app
    network_mode: "host"
    volumes:
      - ./:/app
    environment:
      POSTGRES_URL: postgres://postgres:postgres@127.0.0.1:5432/postgres
      PHASE27_CLAIM_ONE_SQL: sql/phase40_claim_one_tierA.sql
      PHASE27_MARK_SUCCESS_SQL: server/worker/phase28_mark_success.sql
      PHASE27_MARK_FAILURE_SQL: server/worker/phase28_mark_failure.sql
      PHASE26_TICK_MS: "500"
      PHASE26_WORKER_ACTOR: phase26.worker
    command: ["node","server/worker/phase26_task_worker.mjs"]
