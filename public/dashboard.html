<!-- full HTML content not shown for brevity -->
<script>
  const messages = document.getElementById("messages");
  const input = document.getElementById("input");

  function handleSubmit(event) {
    event.preventDefault();
    const userText = input.value.trim();
    if (!userText) return;

    const userMsg = document.createElement("div");
    userMsg.className = "message user-message";
    userMsg.textContent = userText;
    messages.appendChild(userMsg);

    const botMsg = document.createElement("div");
    botMsg.className = "message bot-message";

    const lowerText = userText.toLowerCase();

    const isAgentCommand = /^(matilda|cade|effie):/.test(lowerText);
    const agentMatch = lowerText.match(/^(matilda|cade|effie):/);
    const agent = agentMatch ? agentMatch[1] : "matilda";
    const content = isAgentCommand ? userText.split(":")[1].trim() : userText;

    if (isAgentCommand || !agentMatch) {
      botMsg.textContent = `${agent.charAt(0).toUpperCase() + agent.slice(1)}: Received “${content}”`;
    } else {
      botMsg.textContent = "❓ Unrecognized agent. Try: matilda:, cade:, or effie:";
    }

    messages.appendChild(botMsg);
    input.value = "";
    messages.scrollTop = messages.scrollHeight;
  }

  document.querySelector("form").addEventListener("submit", handleSubmit);
</script>
</body>
</html>
