version: "3.8"
services:
  workerA:
    image: mbhq-worker:phase32
    environment:
      # talk to the host-published Postgres port
      POSTGRES_URL: postgres://postgres:postgres@host.docker.internal:5432/postgres
      # keep any existing worker env defaults if your image reads them internally
      WORKER_OWNER: workerA
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

  workerB:
    image: mbhq-worker:phase32
    environment:
      POSTGRES_URL: postgres://postgres:postgres@host.docker.internal:5432/postgres
      WORKER_OWNER: workerB
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
